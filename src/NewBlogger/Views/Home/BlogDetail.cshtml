@using NewBlogger.Dto
@model BlogDto
<style>
    p {
        margin: 8px 0;
        padding: 0 0 8px 0;
    }
</style>

<div class="mainbar">
    <div class="article">
        <h2 style="background: url(/images/h2_bgm.gif) no-repeat left center">
            <span>
                &nbsp;&nbsp; @Model.Title
            </span>
        </h2>
        <div class="clr"></div>
        <p>Posted by <a href="#">Owner</a> </p>
        <p>@Model.Content</p>
        <p>
            Tagged:
            @{
                foreach (var tag in Model.Tags)
                {
                    <a href="javascript:void(0)">@tag.Name</a>
                }
            }

        </p>
        <p><a href="javascript:void(0)"><strong>Comments (@Model.Comments.Count)</strong></a> <span>&nbsp;•&nbsp;</span> @Model.AddTime <span>&nbsp;•&nbsp;</span> </p>
    </div>
    <div class="article">
        <h2 style="background: url(/images/h2_bgm.gif) no-repeat left center">
            <span>
                &nbsp;&nbsp;  <font size="5"><font color="#00b3ea">@(Model.Comments.Count)</font> Responses</font>
            </span>
        </h2>
        <div class="clr"></div>
        @{
            foreach (var comment in Model.Comments)
            {
                <text>
                    <div class="well">
                        <div class="comment">
                            <span class="comment_actions">
                                <a href="javascript:void(0);" onclick="$('#replyId').val('@comment.Id')">回复</a>
                            </span>
                            <a href="javascript:void(0)"><img src="~/images/userpic.gif" width="40" height="40" alt="" class="userpic"></a>
                            <p>
                                <a href="javascript:void(0);">@comment.ReplyNickName</a> Says:<br>
                                @comment.AddTime.ToString("yyyy-MM-dd HH:mm:ss")
                            </p>
                            <p>@comment.Content</p>
                        </div>
                    </div>
                </text>
            }
        }
    </div>
    <div>
        <h2 style="background: url(/images/h2_bgm.gif) no-repeat left center">
            <span>
                &nbsp;&nbsp;  <font size="5"><font color="#00b3ea">Leave a</font> Reply</font>
            </span>
        </h2>
        <div class="clr"></div>
        <form action="@Url.Action("Reply", "Home")" method="post" id="leavereply">
            <input type="hidden" id="blogId" name="blogId" value="@Model.Id" />
            <input type="hidden" id="replyId" name="replyId" value="" />
            <ol>
                <li>
                    <label for="name">Name (required)</label>
                    <input id="name" name="name" class="text"  nullmsg="昵称不能为空">
                    <span class="Validform_checktip"></span>
                </li>
                <li>
                    <label for="email">Email Address (required)</label>
                    <input id="email" name="email" class="text"   nullmsg="邮箱不能为空">
                    <span class="Validform_checktip"></span>
                </li>
                <li>
                    <label for="message">Your Message (required)</label>
                    <textarea id="message" name="message" rows="8" cols="50" nullmsg="回复不能为空"></textarea>
                    <span class="Validform_checktip"></span>
                </li>
                <li>
                    <input type="image" name="imageField" id="imageField" src="~/images/submit.gif" class="send">
                    <div class="clr"></div>
                </li>
            </ol>
        </form>
    </div>
</div>
@section scripts{

    <script src="@Url.Content("~/lib/Validform/Validform.js")"></script>
    <script>
        $(function() {
            var demo = $("#leavereply").Validform({//指明是哪一表单需要验证,名称需加在form表单上;
                tiptype: 3,
                label: ".label",
                showAllError: true,
                datatype: {
                    "zh1-6": /^[\u4E00-\u9FA5\uf900-\ufa2d]{1,6}$/,
                    "Aa1": /^[A-Za-z0-9]+$/
                },
                ajaxPost: true
            });

            //通过$.Tipmsg扩展默认提示信息;
            //$.Tipmsg.w["zh1-6"]="请输入1到6个中文字符！";
            demo.tipmsg.w["zh1-6"] = "请输入1到6个中文字符！";//可以自定义一些消息提示,zh1-6是自定义的datatype

            demo.addRule([{
                ele: "#name",
                datatype: "zh1-6"
                // ajaxurl:"ajax_post.php?/checkname/name=$_GET['name']"//可以写方法检测中文名是否已经存在
            },
            {
                ele: "#email",
                datatype: "*6-20"
            },
            {
                ele: "#message",
                datatype: "*6-20"
            }
            ]);
        })
    </script>
}
 
